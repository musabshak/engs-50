#!/bin/bash

errors=False
leaks=False

for i in {1..10}
do
	if [[ $(valgrind --leak-check=full test${i} | grep "ERROR SUMMARY: [1-9]* errors") != "" ]] ; then
		 echo "test${i} terminates with an error"
		 errors=True
	fi

	if [[ $(valgrind --leak-check=full test${i} | grep "still reachable: [1-9]* bytes") != "" ]] ; then
		 echo "test${i} has leaks"
		 leaks=True
	fi

	if [[ errors = "False" && leaks = "False" ]] ; then
		 echo "test${i} terminates without any leaks or errors"
	fi
done
